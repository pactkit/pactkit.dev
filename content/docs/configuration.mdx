---
title: Configuration
description: Deployed files and customization
---

<Callout type="info">
This page covers the **pip install** deployment. If you installed via the [Claude Code Plugin](/docs/installation#option-a-claude-code-plugin-recommended), all components are deployed automatically and `pactkit.yaml` is not used.
</Callout>

## Deployed Files

`pactkit init` deploys the following to `~/.claude/`:

| Path | Contents |
|------|----------|
| `CLAUDE.md` | Constitution root (references 6 rule modules) |
| `rules/01-core-protocol.md` | Core behavioral rules |
| `rules/02-hierarchy-of-truth.md` | Spec > Tests > Code |
| `rules/03-file-atlas.md` | File location reference |
| `rules/04-routing-table.md` | Command routing table |
| `rules/05-workflow-conventions.md` | Git/PR conventions |
| `rules/06-mcp-integration.md` | MCP server integration |
| `agents/*.md` | 9 agent definitions |
| `commands/*.md` | 9 command playbooks |
| `skills/*/` | 10 skills (3 scripted + 7 prompt-only) |

## pactkit.yaml Reference

The `pactkit.yaml` file controls which components are deployed and how they behave:

| Field | Type | Default | Description |
|-------|------|---------|-------------|
| `stack` | string | auto-detected | Project stack (`python`, `node`, `go`, `java`) |
| `version` | string | current | PactKit version that generated the config |
| `root` | string | `.` | Project root directory (deployment target resolves to `~/.claude` by default) |
| `agents` | list | all 9 | Agent definitions to deploy |
| `commands` | list | all 9 | Command playbooks to deploy |
| `skills` | list | all 10 | Skills to deploy |
| `rules` | list | all 6 | Constitution rule modules to deploy |
| `exclude` | object | `{}` | Components to exclude (e.g., `exclude.agents: [agent-name]`, `exclude.commands: [cmd-name]`) |
| `ci` | object | `provider: none` | CI/CD pipeline generation (`github`, `gitlab`, `none`) |
| `issue_tracker` | object | `provider: none` | External issue tracker (`github`, `none`) |
| `hooks` | object | disabled | Opt-in hook templates (pre-commit, post-test, pre-push) |
| `lint_blocking` | bool | `false` | Whether lint failures block commits in Done command |
| `auto_fix` | bool | `false` | Whether to auto-fix lint errors before checking |
| `check.security_checklist` | bool | `true` | Enable 8-item structured security checklist in Check phase |
| `done.lesson_quality_threshold` | int | `15` | Minimum quality score (0-25) for lessons to be auto-appended |
| `agent_models` | object | `{}` | Per-agent model overrides (values: `haiku`, `sonnet`, `opus`, `inherit`) |
| `rule_scopes` | object | `{}` | Map rule IDs to glob patterns for context-aware scoping |
| `enterprise` | object | all `false` | Enterprise flags: `no_git`, `no_external`, `non_interactive`, `debug` |

<Callout type="info">
All conditional features (CI/CD, issue tracking, hooks, lint blocking) are **disabled by default** and only activate when explicitly configured. This respects diverse user environments.
</Callout>

## Constitution Rules

The 6 rule modules form the "constitution" that governs agent behavior:

| Module | Purpose |
|--------|---------|
| **Core Protocol** | Session Context, Visual First, Strict TDD, Language Matching |
| **Hierarchy of Truth** | Spec > Tests > Code precedence, conflict resolution rules |
| **File Atlas** | Standard file locations and their purposes |
| **Routing Table** | Maps commands to agents and playbooks |
| **Workflow Conventions** | Conventional Commits, branch naming, PR conventions |
| **MCP Integration** | Conditional MCP server usage by PDCA phase |

## Language Profiles

PactKit auto-detects the project stack and configures the appropriate test runner and lint command:

| Stack | Test Runner | Lint Command | Package File |
|-------|------------|-------------|-------------|
| `python` | `pytest tests/` | `ruff check src/ tests/` | `pyproject.toml` |
| `node` | `npx jest` | `npx eslint .` | `package.json` |
| `go` | `go test ./...` | `golangci-lint run` | `go.mod` |
| `java` | `mvn test` | `mvn checkstyle:check` | `pom.xml` |

Valid `stack` values in `pactkit.yaml`: `python`, `node`, `go`, `java`. Detection is automatic based on manifest files found in the project.

The `lint_command` is used by both Act and Done commands to run a CI lint gate before commit, catching formatting and style errors early.

## Safe Regression

PactKit's safe regression system prevents agents from blindly modifying pre-existing tests:

- **TDD Loop** — Only iterates on tests created in the current story
- **Regression Check** — Read-only gate; pre-existing test failure = STOP and report
- **Done Gate** — Full regression by default; incremental only when ALL safety conditions are met

## Idempotent Updates

```bash
pactkit update
```

Safe to re-run at any time. Re-deploys all managed files while preserving your custom rules (any files without the `01-` through `06-` prefixes in the rules directory).

## Preview

Preview the deployment without modifying `~/.claude/`:

```bash
pactkit init -t /tmp/preview
ls /tmp/preview/
```
